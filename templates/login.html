<!DOCTYPE html>
<html>
<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

{% include "navbar.html" %}

<div class="container mt-5">
<div class="card mx-auto p-4 shadow" style="width:350px;">

<h4 class="text-center">Login</h4>

<input id="username" class="form-control mt-2" placeholder="Username">
<input id="password" type="password" class="form-control mt-2" placeholder="Password">

<button onclick="login()" class="btn btn-primary w-100 mt-3">Login</button>

<p id="message" class="text-center mt-3"></p>

</div>
</div>

<script>
function login() {
    fetch("/api/login", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({
            username:username.value,
            password:password.value
        })
    }).then(r=>r.json()).then(d=>{
        if(d.redirect) window.location.href=d.redirect;
        else message.innerText=d.error;
    });
}
</script>

</body>
</html>
